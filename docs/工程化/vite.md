# **Vite è¯¦è§£**

## **ä¸€ã€Vite æ˜¯ä»€ä¹ˆï¼Ÿ**

Viteï¼ˆæ³•è¯­â€œå¿«é€Ÿâ€çš„æ„æ€ï¼‰æ˜¯ä¸€ä¸ª **ç°ä»£å‰ç«¯æ„å»ºå·¥å…·**ï¼Œä¸“ä¸º **å¼€å‘ä½“éªŒä¼˜åŒ–**ï¼Œä¸»è¦ç”¨äº **Vueã€React** ç­‰æ¡†æ¶çš„å¼€å‘ã€‚ç›¸æ¯” Webpackï¼ŒVite **å¯åŠ¨æ›´å¿«ã€æ„å»ºæ›´å¿«ã€çƒ­æ›´æ–°æ›´å¿«**ï¼Œæ˜¯æ–°ä¸€ä»£å‰ç«¯å¼€å‘å·¥å…·ã€‚

### **1. Vite çš„ç‰¹ç‚¹**

âœ… **æå¿«çš„å¼€å‘æœåŠ¡å™¨**ï¼ˆåŸºäº ES Moduleï¼Œé¿å…äº† Webpack çš„â€œæ‰“åŒ…ç­‰å¾…â€ï¼‰
 âœ… **åŸç”Ÿ ES Module æ”¯æŒ**ï¼ˆåªç¼–è¯‘å½“å‰ä½¿ç”¨çš„æ¨¡å—ï¼Œæå‡é€Ÿåº¦ï¼‰
 âœ… **æ›´å¿«çš„çƒ­æ›´æ–°ï¼ˆHMRï¼‰**ï¼ˆä»…æ›´æ–°æ”¹åŠ¨éƒ¨åˆ†ï¼Œå‡å°‘æµè§ˆå™¨åˆ·æ–°ï¼‰
 âœ… **å†…ç½®æ”¯æŒ TypeScriptã€Vueã€Reactã€CSS é¢„å¤„ç†å™¨**
 âœ… **Rollup æ„å»ºä¼˜åŒ–**ï¼ˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Rollup è¿›è¡Œæ‰“åŒ…ï¼Œä¼˜åŒ–è¾“å‡ºï¼‰

------

## **äºŒã€Vite çš„æ ¸å¿ƒåŸç†**

Vite **åˆ†ä¸ºä¸¤ç§æ¨¡å¼**ï¼š

1. **å¼€å‘æ¨¡å¼ï¼ˆDev Modeï¼‰**ï¼šåŸºäº **ES Module**ï¼Œä¸éœ€è¦æ‰“åŒ…ï¼ŒæŒ‰éœ€åŠ è½½æ–‡ä»¶ã€‚
2. **ç”Ÿäº§æ¨¡å¼ï¼ˆBuild Modeï¼‰**ï¼šä½¿ç”¨ **Rollup** è¿›è¡Œæ‰“åŒ…ä¼˜åŒ–ï¼Œç”Ÿæˆé«˜æ•ˆçš„é™æ€æ–‡ä»¶ã€‚

### **1. ä¼ ç»Ÿ Webpack çš„é—®é¢˜**

Webpack **å¯åŠ¨æ…¢**ï¼Œå› ä¸ºï¼š

- éœ€è¦ **æå‰æ‰“åŒ…** æ•´ä¸ªé¡¹ç›®ï¼ˆå³ä½¿åªæ”¹äº†ä¸€è¡Œä»£ç ï¼‰ã€‚
- ä»£ç æ”¹åŠ¨åï¼Œçƒ­æ›´æ–° **é‡æ–°ç¼–è¯‘æ•´ä¸ª Bundle**ï¼Œå¯¼è‡´é€Ÿåº¦å˜æ…¢ã€‚

### **2. Vite è§£å†³æ–¹æ¡ˆ**

- å¼€å‘æ¨¡å¼ä¸‹ï¼ŒVite **ä¸éœ€è¦æ‰“åŒ…**ï¼Œç›´æ¥åŸºäº **æµè§ˆå™¨çš„ ES Module** æœºåˆ¶è¿›è¡ŒæŒ‰éœ€åŠ è½½ã€‚
- ä¿®æ”¹ä»£ç æ—¶ï¼ŒVite **åªç¼–è¯‘æ”¹åŠ¨çš„æ¨¡å—**ï¼Œè€Œä¸æ˜¯é‡æ–°æ‰“åŒ…æ•´ä¸ªé¡¹ç›®ï¼Œ**HMRï¼ˆçƒ­æ›´æ–°ï¼‰é€Ÿåº¦æ›´å¿«**ã€‚

------

## **ä¸‰ã€Vite çš„å®‰è£…ä¸ä½¿ç”¨**

### **1. å®‰è£… Vite**

Vite æ”¯æŒ **Vueã€Reactã€Svelte ç­‰æ¡†æ¶**ï¼Œå¯ä»¥ç›´æ¥åˆ›å»ºé¡¹ç›®ï¼š

```sh
# ç›´æ¥åˆ›å»º Vue é¡¹ç›®
npm create vite@latest my-vite-app -- --template vue

# åˆ›å»º React é¡¹ç›®
npm create vite@latest my-vite-app -- --template react
```

æˆ–è€…æ‰‹åŠ¨å®‰è£…ï¼š

```sh
npm install vite -g  # å…¨å±€å®‰è£…
```

------

### **2. è¿è¡Œ Vite**

```sh
npm run dev  # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

ğŸš€ **Vite å¯åŠ¨é€Ÿåº¦æå¿«**ï¼Œå› ä¸ºå®ƒ **ä¸éœ€è¦æ‰“åŒ…**ï¼Œç›´æ¥ä½¿ç”¨æµè§ˆå™¨è§£ææ¨¡å—ã€‚

------

## **å››ã€Vite çš„æ ¸å¿ƒé…ç½®**

Vite çš„é…ç½®æ–‡ä»¶æ˜¯ `vite.config.js`ï¼Œæ”¯æŒ TypeScript ç‰ˆæœ¬ `vite.config.ts`ã€‚

### **1. åŸºæœ¬é…ç½®**

```js
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';

export default defineConfig({
  plugins: [vue()],  // å¼•å…¥ Vue æ’ä»¶
  server: {
    port: 3000,  // æŒ‡å®šç«¯å£
    open: true,  // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    proxy: {      // é…ç½®ä»£ç†ï¼ˆè§£å†³è·¨åŸŸé—®é¢˜ï¼‰
      '/api': {
        target: 'https://your-api.com',
        changeOrigin: true,
        rewrite: path => path.replace(/^\/api/, '')
      }
    }
  },
  build: {
    outDir: 'dist',  // æŒ‡å®šè¾“å‡ºç›®å½•
    minify: 'esbuild',  // ä½¿ç”¨ esbuild è¿›è¡Œæ›´å¿«çš„å‹ç¼©
  }
});
```

------

## **äº”ã€Vite é‡è¦ç‰¹æ€§**

### **1. HMRï¼ˆçƒ­æ›´æ–°ï¼‰**

Vite å†…ç½® **æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰**ï¼Œå½“ä½ ä¿®æ”¹ä»£ç æ—¶ï¼ŒVite åªä¼šæ›´æ–°å˜æ›´çš„éƒ¨åˆ†ï¼Œè€Œä¸ä¼šé‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚

```js
// example.js
import { createApp } from 'vue';
import App from './App.vue';

createApp(App).mount('#app');

// ç›‘å¬æ¨¡å—å˜æ›´
if (import.meta.hot) {
  import.meta.hot.accept((newModule) => {
    console.log('Module updated:', newModule);
  });
}
```

------

### **2. å†…ç½®æ”¯æŒ TypeScript**

Vite **æ— éœ€é¢å¤–é…ç½®**ï¼Œå³å¯æ”¯æŒ TypeScriptï¼š

```ts
const name: string = "Vite";
console.log(`Hello, ${name}!`);
```

ä½†å¦‚æœè¦ **å¼€å¯ç±»å‹æ£€æŸ¥**ï¼Œéœ€è¦å®‰è£… `typescript`ï¼š

```sh
npm install typescript -D
```

------

### **3. CSS é¢„å¤„ç†å™¨æ”¯æŒ**

Vite **åŸç”Ÿæ”¯æŒ SCSS / LESS / Stylus**ï¼š

```scss
// styles.scss
$primary-color: #42b983;
body {
  background-color: $primary-color;
}
```

ç›´æ¥åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

```vue
<style lang="scss">
@import './styles.scss';
</style>
```

------

### **4. ç¯å¢ƒå˜é‡**

Vite æ”¯æŒ `.env` æ–‡ä»¶ï¼š

```sh
# .env
VITE_API_URL=https://api.example.com
```

åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š

```js
console.log(import.meta.env.VITE_API_URL);
```

------

## **å…­ã€Vite å’Œ Webpack çš„å¯¹æ¯”**

| ç»´åº¦         | Vite                             | Webpack                         |
| ------------ | -------------------------------- | ------------------------------- |
| **å¯åŠ¨é€Ÿåº¦** | âœ… æå¿«ï¼ˆåŸºäº ES Modulesï¼‰        | ğŸš« è¾ƒæ…¢ï¼ˆéœ€å…ˆæ‰“åŒ…ï¼‰              |
| **çƒ­æ›´æ–°**   | âœ… å¿«é€Ÿï¼ˆä»…æ›´æ–°æ”¹åŠ¨éƒ¨åˆ†ï¼‰         | ğŸš« è¾ƒæ…¢ï¼ˆé‡æ–°ç¼–è¯‘æ•´ä¸ª Bundleï¼‰   |
| **æ„å»ºé€Ÿåº¦** | âœ… ç”Ÿäº§æ¨¡å¼ä½¿ç”¨ esbuildï¼Œé€Ÿåº¦æ›´å¿« | ğŸš« ç”Ÿäº§æ¨¡å¼ä½¿ç”¨ Terserï¼Œé€Ÿåº¦è¾ƒæ…¢ |
| **ä»£ç æ‹†åˆ†** | âœ… åŸºäº Rollup è¿›è¡Œ Tree Shaking  | âœ… å¯é…ç½®                        |
| **ç”Ÿæ€æ”¯æŒ** | âœ… Vue å®˜æ–¹æ¨èï¼Œæ”¯æŒ Vueã€React  | âœ… ç”Ÿæ€æˆç†Ÿï¼Œæ’ä»¶ä¸°å¯Œ            |
| **é€‚ç”¨åœºæ™¯** | ğŸš€ é€‚åˆç°ä»£å‰ç«¯ï¼ˆVue3ã€React18ï¼‰  | ğŸ¢ é€‚åˆå¤§å‹é¡¹ç›®                  |

**æ€»ç»“**ï¼š

- **å¼€å‘é˜¶æ®µ**ï¼šVite **æ¯” Webpack æ›´å¿«**ï¼Œé€‚åˆå‰ç«¯å¼€å‘ä½“éªŒä¼˜åŒ–ã€‚

- **ç”Ÿäº§é˜¶æ®µ**ï¼šVite **ä½¿ç”¨ Rollup æ‰“åŒ…**ï¼Œæ€§èƒ½ä¸ Webpack **æ¥è¿‘**ã€‚

- ç»¼åˆå»ºè®®

  ï¼š

  - **Vue 3 / React 18** é¡¹ç›®æ¨è **Vite**ã€‚
  - **ä¼ä¸šçº§å¤æ‚é¡¹ç›®**ï¼ˆå¦‚å¾®å‰ç«¯ã€å¤šå­åº”ç”¨ï¼‰ä»ç„¶å»ºè®® **Webpack**ã€‚

------

## **ä¸ƒã€Vite æ’ä»¶**

Vite ä½¿ç”¨ **Rollup æ’ä»¶æœºåˆ¶**ï¼Œä½†æœ‰è‡ªå·±ç‹¬ç‰¹çš„æ’ä»¶ APIï¼š

### **1. ä½¿ç”¨ Vue æ’ä»¶**

```sh
npm install @vitejs/plugin-vue -D
```

åœ¨ `vite.config.js` ä¸­é…ç½®ï¼š

```js
import vue from '@vitejs/plugin-vue';
export default defineConfig({
  plugins: [vue()]
});
```

### **2. ä½¿ç”¨ React æ’ä»¶**

```sh
npm install @vitejs/plugin-react -D
```

åœ¨ `vite.config.js` é…ç½®ï¼š

```js
import react from '@vitejs/plugin-react';
export default defineConfig({
  plugins: [react()]
});
```

------

## **å…«ã€æ€»ç»“**

### **1. Vite é€‚åˆä»€ä¹ˆé¡¹ç›®ï¼Ÿ**

âœ… **Vue 3 / React 18 é¡¹ç›®**
 âœ… **è¿½æ±‚å¿«é€Ÿçƒ­æ›´æ–°çš„é¡¹ç›®**
 âœ… **é™æ€ç½‘ç«™ã€SPAã€SSR é¡¹ç›®**

### **2. Webpack vs Vite ä½•æ—¶é€‰æ‹©ï¼Ÿ**

- **æ–°é¡¹ç›®**ï¼ˆVue / Reactï¼‰âœ… **æ¨è Vite**
- **è€é¡¹ç›®è¿ç§»** ğŸ¢ **Webpack ä»ç„¶é€‚ç”¨**
- **å¤§å‹ä¼ä¸šé¡¹ç›®** ğŸ¢ **Webpack æ’ä»¶æ›´ä¸°å¯Œ**

------

ğŸš€ **Vite æ˜¯å‰ç«¯å¼€å‘çš„æœªæ¥**ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨ Vue 3 / React 18ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨ Viteï¼