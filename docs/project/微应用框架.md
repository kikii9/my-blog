# 微应用框架

开发周期：

项目概述：微应用的底层逻辑

技术栈：vue3 + elementui plus +vite

难度：⭐⭐⭐

繁琐程度：⭐⭐⭐⭐⭐

**相关知识点：**

- 组件封装中的$attrs

### 组件封装中的$attrs

在Vue.js框架中，`$attrs`是一个非常有用的属性，它使得组件间的通信和属性传递更加灵活和方便。`$attrs`包含了父作用域中不作为prop被识别（即未在子组件的props选项中声明）的绑定属性（class和style除外），这些属性可以通过`v-bind="$attrs"`被自动地添加到子组件的根元素上，或者在子组件内部手动处理。

#### `$attrs`的主要用途

1. **属性传递的简化**：在构建高度可复用的组件时，可能需要将大量属性传递给子组件。使用`$attrs`可以避免在每个组件中手动声明所有的prop，简化代码。
2. **非Prop属性的继承**：有时候，我们希望一些属性能够自动传递给子组件，而不需要显式地通过props来声明和传递。`$attrs`使得这种“隐式传递”成为可能，提高开发效率。
3. **构建高阶组件（HOC）**：在高阶组件模式中，`$attrs`可以用来传递额外信息给包裹的组件，使得封装和重用逻辑更加容易。

#### 使用`$attrs`

#### 在子组件中自动绑定到根元素

假设有一个父组件向子组件传递了一些非prop属性：

```
htmlCopy Code<!-- 父组件 -->
<ChildComponent custom-attr="value" />
```

在子组件中，可以通过`v-bind="$attrs"`将所有的`$attrs`属性绑定到根元素上：

```
htmlCopy Code<!-- 子组件 -->
<template>
  <div v-bind="$attrs">
    <!-- 组件内容 -->
  </div>
</template>
```

这样，`custom-attr="value"`就会自动添加到子组件的根`<div>`元素上。

#### 手动处理`$attrs`

在某些情况下，你可能需要在组件内部对`$attrs`进行更细致的控制或处理，而不是直接绑定到根元素。此时，可以在组件的JavaScript部分访问`this.$attrs`来获取这些属性，并根据需要进行操作。

#### 注意事项

- 使用`$attrs`时，需要注意版本兼容性，因为它是Vue 2.4.0+引入的特性。
- 在Vue 3中，`$attrs`包括了事件监听器，这与Vue 2中的行为不同，在迁移或升级时需要注意。
- 虽然`$attrs`提供了便利，但过度使用可能会使得组件间的数据流变得难以追踪，因此在设计组件接口时还需要考虑清晰性和可维护性。